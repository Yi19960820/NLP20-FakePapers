We present a deep neural network-based approach to image quality assessment (IQA) . The network is trained end-to-end and comprises N convolutional layers and N pooling layers for feature extraction, and N fully connected layers for regression, which makes it significantly deeper than related IQA models. Unique features of the proposed architecture are that (N) with slight adaptations it can be used in a no-reference (NR) as well as in a full-reference (FR) IQA setting and (N) it allows for joint learning of local quality and local weights, i.e., relative importance of local quality to the global quality estimate, in an unified framework. Our approach is purely data-driven and does not rely on hand-crafted features or other types of prior domain knowledge about the human visual system or image statistics. We evaluate the proposed approach on the LIVE, CISQ and TIDN databases as well as the LIVE In the Wild Image Quality Challenge Database and show superior performance to state-of-the-art NR and FR IQA methods. Finally, cross-database evaluation shows a high ability to generalize between different databases, indicating a high robustness of the learned features.