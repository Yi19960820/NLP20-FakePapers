Stereo matching is a fundamental problem in computer vision. It has a wide range of applications, such as robotics and autonomous driving _cite_ . Given a rectified image pair, the main goal is to find corresponding pixels from stereo images. Most traditional stereo algorithms _cite_ follow the classical four-step pipeline _cite_, including matching cost computation, cost aggregation, disparity calculation and disparity refinement. However the hand-crafted features and multi-step regularized functions limit their improvements. Since _cite_, CNN based stereo methods extract deep features to represent image patches and compute matching cost. Although the performance on several benchmarks is significantly promoted, there remains some difficulties, including the limited receptive fields and complicated regularized functions. Recently end-to-end disparity estimation networks _cite_ achieve state-of-the-art performance, however drawbacks still exist. Firstly, it is difficult to handle local ambiguities in ill-posed regions. Secondly, the cascade structures or ND convolution based structures are computationally expensive. Lastly, disparity predictions of thin structures or near boundaries are not accurate. Humans, on the other hand, can find stereo correspondences easily by utilizing edge cues. Accurate edge contours can help discriminating between different objects or regions. In addition, humans perform binocular alignment well in texture-less or occluded regions based on global perception at different scales. Based on these observations, we design a multi-task network that cooperates edge cues and edge regularization into disparity prediction pipeline. Firstly, we design a disparity network for, called context pyramid based residual pyramid network () . Two modules are designed for: a context pyramid to encode multi-scale context information for ill-posed regions, and an one-stage residual pyramid to simplify the cascaded refinement structure. Secondly an edge detection sub-network is designed and employed in our unified model, to preserve subtle details with edge cues. Interactions between two tasks are threefold: (\romannumeralN) Edge features are embedded into disparity branch providing local and low-level representations. (\romannumeralN) The edge map, acting as an implicit regularization term, is fed to residual pyramid. (\romannumeralN) The edge map is also utilized in, which further guides disparity learning. In disparity branch of, we use a siamese network with a correlation operation _cite_ to extract image features and compute matching cost volumes, followed by a context pyramid. Based on different representations (unary features, edge features and matching cost volumes), context pyramid can encode contextual cues in multiple scales. Then they are aggregated as a hierarchical scene prior. Next we employ an hour-glass structure to regress the full-size disparity map. Different with the decoder in DispNetC or the cascade encoder-decoder in CRL, decoder in is replaced by the proposed residual pyramid. We predict the disparity map on the smallest scale and learn disparity residuals on other scales. Hence learning and refining are conducted in a single decoder, making as an one-stage disparity estimation model. Based on experimental results in Table _ref_, our residual pyramid is better and faster than other cascade structures. In edge branch of, the shallow part of backbone network is shared with . Edge feature and edge map are embedded into the disparity branch, under the guidance of . Both edge and disparity branches are fully-convolutional so that end-to-end training can be conducted for . As there is no dataset providing both ground-truth disparities and edge labels, we propose a multi-phase training strategy. We adopt the supervised disparity regression loss and our adapted edge-aware smoothness loss to train the entire, achieving a high accuracy on Scene Flow dataset _cite_ . We further finetune our model on KITTI N and N datasets, achieving state-of-the-art performance on KITTI stereo benchmarks. After multi-task learning, both disparity estimation and edge detection tasks are improved in both quantitatively and qualitatively. In summary, our main contribution is threefold. (\romannumeralN) We propose to support the joint learning of scene matching and edge detection, where edge cues and edge-aware smoothness loss serve as important guidance for disparity learning. The multi-task labels are not required during training due to our proposed multi-phase training strategy. (\romannumeralN) The effective context pyramid is designed to handle ill-posed regions, and the efficient residual pyramid is designd to replace cascade refinement structures. (\romannumeralN) Our unified model achieves state-of-the-art performance on Scene Flow dataset, KITTI stereo N and N benchmarks.